(function(t){function e(e){for(var a,i,n=e[0],l=e[1],c=e[2],p=0,u=[];p<n.length;p++)i=n[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&u.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==o[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dashboard-2/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0425":function(t,e,s){"use strict";s("420d")},"212b":function(t,e,s){},3280:function(t,e,s){t.exports=s.p+"img/dtu.5d49d479.png"},"3b9e":function(t,e,s){"use strict";s("b90e")},"420d":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Navbar"),e("SidebarHosts"),e("b-container",{attrs:{fluid:""}},[e("b-row",[e("SidebarWrapper"),e("router-view")],1)],1)],1)},r=[],i=function(){var t=this,e=t._self._c;return e("b-navbar",{staticClass:"shadow fixed-top",staticStyle:{"background-color":"#900 !important"},attrs:{toggleable:"lg",type:"dark"}},[e("b-navbar-brand",{attrs:{href:"#"}},[e("img",{staticClass:"d-inline-block align-top",attrs:{src:s("3280"),alt:"DTU",height:"30"}}),t._v(" PDL - ProcessDryLab ")]),e("b-navbar-toggle",{attrs:{target:"nav-collapse","is-nav":""}}),e("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-nav-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-1",modifiers:{"sidebar-1":!0}}]},[t._v("Hosts configuration")])],1)],1)],1)},n=[],l={name:"Navbar"},c=l,d=s("2877"),p=Object(d["a"])(c,i,n,!1,null,null,null),u=p.exports,m=function(){var t=this,e=t._self._c;return e("b-sidebar",{attrs:{id:"sidebar-1",width:"500px",title:"Hosts configuration",shadow:"",backdrop:""}},[e("div",{staticClass:"px-3 py-2"},[e("h5",{staticClass:"mb-3"},[t._v("Repositories")]),e("b-list-group",t._l(this.$store.getters.getHostsRepository,(function(s){return e("b-list-group-item",{key:s.name,staticClass:"pl-2 pr-2",class:s.status,staticStyle:{width:"100%","font-size":"0.85em","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"}},[e("b-icon",{attrs:{icon:"hdd-fill"}}),e("code",{staticClass:"text-dark ml-2",attrs:{title:s.name}},[t._v(t._s(s.name))]),e("b-button",{staticClass:"float-right p-0 text-secondary",staticStyle:{"font-size":"0.75em"},attrs:{variant:"link"},on:{click:function(e){return t.deleteEntry({type:"repository",name:s.name})}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),1),e("h5",{staticClass:"mt-4 mb-3"},[t._v("Miners")]),e("b-list-group",t._l(this.$store.getters.getHostsMiner,(function(s){return e("b-list-group-item",{key:s.name,staticClass:"pl-3",class:s.status,staticStyle:{width:"100%","font-size":"0.85em","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"}},[e("b-icon",{attrs:{icon:"gear-fill"}}),e("code",{staticClass:"text-dark ml-2"},[t._v(t._s(s.name))]),e("b-button",{staticClass:"float-right py-0 px-1 text-secondary",staticStyle:{"font-size":"0.75em"},attrs:{variant:"link"},on:{click:function(e){return t.deleteEntry({type:"miner",name:s.name})}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),1),e("div",{staticClass:"btn-group fixed-bottom px-3 py-2",attrs:{role:"group"}},[e("button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-host-modal",modifiers:{"new-host-modal":!0}}],staticClass:"btn btn-primary",attrs:{type:"button"}},[t._v("Add new host")])])],1),e("NewHostModal")],1)},h=[],f=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{centered:"",id:"new-host-modal",title:"New Host"},on:{ok:t.handleOk}},[e("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("ValidatedInputText",{attrs:{label:"Hostname:",placeholder:"http://miner.host.net",error:"Enter the new host (examples: <code>http://miner.host.net</code> or <code>https://repository.host.net</code>)",type:"text",state:t.validateState("hostname")},model:{value:t.hostname,callback:function(e){t.hostname=e},expression:"hostname"}}),e("b-form-group",{attrs:{label:"Host type:"}},[e("b-form-select",{attrs:{options:t.types,required:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1)])},b=[],v=function(){var t=this,e=t._self._c;return e("div",["choice"==t.type.toLowerCase()?e("div",[e("b-form-group",{attrs:{label:t.label}},t._l(t.placeholder.split(";"),(function(s){return e("b-form-radio",{key:s,attrs:{state:t.state,name:t.label,value:s},on:{input:t.update}},[t._v(" "+t._s(s)+" ")])})),1)],1):e("b-form-group",{attrs:{label:t.label,state:t.state}},["file"==t.type.toLowerCase()?e("b-form-file",{attrs:{placeholder:"Upload a file","drop-placeholder":"Drop file here...",state:t.state}}):e("b-form-input",{attrs:{type:"text",placeholder:t.placeholder,value:t.value,state:t.state},on:{input:t.update}}),e("b-form-invalid-feedback",{attrs:{state:t.state},domProps:{innerHTML:t._s(t.error)}})],1)],1)},y=[],g={name:"ValidatedInputText",props:["host","label","placeholder","error","value","state","type"],methods:{update(t){this.$emit("input",t)}}},w=g,x=Object(d["a"])(w,v,y,!1,null,null,null),_=x.exports,k=s("b5ae");const S=k["helpers"].regex("host",/^https?:\/\/((?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9]{0,61}[a-z0-9]|localhost)(:\d{0,5})?$/i);var C={name:"NewHostModal",components:{ValidatedInputText:_},data:()=>({hostname:"",type:"miner",types:[{value:"miner",text:"Miner host"},{value:"repository",text:"Repository host"}]}),validations:{hostname:{required:k["required"],host:S}},methods:{validateState(t){const{$dirty:e,$error:s}=this.$v[t];return e?!s:null},handleSubmit(){this.$v.$touch(),this.$v.$anyError||(this.$store.commit("addHost",{type:this.type,host:this.hostname}),this.$nextTick(()=>{this.$bvModal.hide("new-host-modal")}))},handleOk(t){t.preventDefault(),this.handleSubmit()}}},$=C,O=Object(d["a"])($,f,b,!1,null,null,null),H=O.exports,j={name:"SidebarHosts",components:{NewHostModal:H},methods:{deleteEntry(t){this.$store.commit("removeHost",t)}}},z=j,U=(s("ccd7"),Object(d["a"])(z,m,h,!1,null,"3ec1e934",null)),M=U.exports,R=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"col-md-4 col-lg-3 col-xl-2 d-md-block bg-light sidebar collapse px-0 border-right"},[e("div",{staticClass:"sidebar-sticky px-0 mx-0"},[e("div",{staticStyle:{height:"calc(100vh - 86px)"}},[e("div",{staticClass:"h-75 overflow-auto pb-1"},[e("b-nav",{staticClass:"flex-column"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-file-modal",modifiers:{"new-file-modal":!0}}],staticClass:"mt-3 mx-2",attrs:{variant:"outline-secondary",disabled:"online"!=this.$store.getters.getSystemStatus}},[e("b-icon",{attrs:{icon:"cloud-upload"}}),t._v(" Upload file ")],1),e("b-button",{staticClass:"mt-1 mx-2",attrs:{variant:"outline-secondary",disabled:"online"!=this.$store.getters.getSystemStatus}},[e("b-icon",{attrs:{icon:"gear-wide-connected"}}),t._v(" New mining instance ")],1)],1),e("SidebarResourcesList")],1),e("div",{staticClass:"h-25 overflow-auto border-top"},[e("SidebarOperationsList")],1)]),e("SidebarStatusSummary")],1),e("FileUploadModal")],1)},D=[],W=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[t._v(" Workspace Entries ")]),0==this.$store.getters.getWorkspace.length?e("p",{staticClass:"text-muted text-center pt-3"},[e("em",[t._v("No entries yet")])]):t._e(),this.$store.getters.getWorkspace.length>0?e("b-list-group",{staticClass:"border-top border-bottom",attrs:{flush:""}},t._l(this.$store.getters.getWorkspace,(function(s){return e("b-list-group-item",{key:s.id,staticClass:"pl-2 pr-2",staticStyle:{width:"100%","font-size":"0.85em","white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"},attrs:{to:{name:"ContentVisualizer",params:{id:s.id}}}},[e("b-badge",{staticClass:"text-uppercase border border-secondary mr-1",attrs:{variant:"light"}},[t._v(" "+t._s(s.type.name)+" ")]),e("span",{attrs:{title:s.name}},[t._v(t._s(s.name))]),e("b-button",{staticClass:"m-0 py-0 px-1",staticStyle:{float:"right","font-size":"0.85em"},attrs:{variant:"text-secondary"},on:{click:function(e){return t.deleteEntry({id:s.id,host:s.host,name:s.name})}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),1):t._e()],1)},N=[];class P{static buildPingUrl(t){return t+"/api/v1/system/ping"}static buildUploadUrl(t){return t+"/api/v1/resources"}static buildResourceListUrl(t){return t+"/api/v1/resources"}static deleteResource(t,e){return t+"/api/v1/resources/"+e}static buildResourceVisualization(t,e,s){return t+"/api/v1/resources/"+e+"/view/"+s}}var T=s("bc3a"),L=s.n(T),I={name:"SidebarResourcesList",methods:{deleteEntry(t){L.a.delete(P.deleteResource(t.host,t.id)).then(()=>{this.$bvToast.toast('File "'+t.name+'" deleted correctly',{title:"Deletion complete",variant:"success",solid:!0}),this.$store.commit("addOperation",{title:"Deletion complete",description:'File "'+t.name+'" deleted correctly',host:t.host,type:"repository"})})}}},E=I,F=Object(d["a"])(E,W,N,!1,null,null,null),V=F.exports,q=function(){var t=this,e=t._self._c;return e("div",[e("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-3 text-muted"},[t._v(" Operations instances ")]),0==this.$store.getters.getOperations.length?e("p",{staticClass:"text-muted text-center pt-3"},[e("em",[t._v("No operations to report")])]):t._e(),e("ul",{staticClass:"list-unstyled operations-list"},t._l(this.$store.getters.getOperations,(function(s){return e("b-media",{key:s.started,staticClass:"mb-2 pl-3",attrs:{"no-body":"",tag:"li"}},[e("b-media",{scopedSlots:t._u([{key:"aside",fn:function(){return["miner"==s.type?e("b-icon",{staticClass:"feather",attrs:{icon:"gear-wide-connected"}}):t._e(),"repository"==s.type?e("b-icon",{staticClass:"feather",attrs:{icon:"cloud-upload"}}):t._e()]},proxy:!0}],null,!0)}),e("b-media-body",{staticStyle:{"white-space":"nowrap",overflow:"hidden !important","text-overflow":"ellipsis !important"}},[e("span",{staticClass:"font-weight-bold",staticStyle:{"white-space":"normal"}},[t._v(" "+t._s(s.title))]),e("br"),e("span",{staticClass:"text-muted"},[t._v(" Execution: "),e("span",{attrs:{title:t._f("moment")(s.started,"dddd, MMMM Do YYYY HH:mm")}},[t._v(t._s(t._f("moment")(s.started,"from","now")))]),e("br"),null!=s.completed?e("span",[t._v(" Completed: "+t._s(t._f("moment")(s.started,"from","now"))),e("br")]):t._e(),t._v(" Host: "),e("tt",{attrs:{title:s.host}},[t._v(t._s(s.host))])],1)])],1)})),1)])},A=[],Y={name:"SidebarOperationsList"},J=Y,B=(s("0425"),Object(d["a"])(J,q,A,!1,null,null,null)),G=B.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pl-3 pt-1 pb-1 small bg-light border-top",staticStyle:{height:"30px"}},[e("b-icon",{class:this.$store.getters.getSystemStatus,attrs:{icon:"circle-fill"}}),t._v(" "+t._s(t.message)+" ")],1)},Q=[],X={name:"SidebarStatusSummary",computed:{message(){const t=this.$store.getters.getSystemStatus;var e="All systems are online";return"offline"===t&&(e="Some systems are offline"),"loading"===t&&(e="Some systems are loading"),e}}},Z=X,tt=(s("3b9e"),Object(d["a"])(Z,K,Q,!1,null,"5bda3d32",null)),et=tt.exports,st=function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{centered:"",id:"new-file-modal",title:"Upload file"},on:{ok:t.handleOk}},[e("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"File to upload:"}},[e("b-form-file",{attrs:{state:Boolean(t.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),e("b-form-group",{attrs:{label:"Repository:"}},[e("b-form-select",{attrs:{options:t.repositories,required:""},model:{value:t.repository,callback:function(e){t.repository=e},expression:"repository"}})],1)],1)])},at=[],ot={name:"FileUploadModal",data:()=>({file:null,repository:"",repositories:[]}),watch:{"$store.getters.getHostsRepository":function(){this.prepare()}},mounted(){this.prepare()},methods:{prepare(){this.repositories=this.$store.getters.getHostsRepository.map(t=>({text:t.name,value:t.name})),this.repository=this.repositories[0].value},handleSubmit(){if(null===this.file)this.$bvToast.toast("No file specified",{title:"Upload",solid:!0,variant:"danger"});else{this.$bvToast.toast('File "'+this.file.name+'" is being uploaded...',{title:"Upload initiated",variant:"info",solid:!0});const t={headers:{"Content-Type":"multipart/form-data"}},e=new FormData;e.append("upfile",this.file),L.a.post(P.buildUploadUrl(this.repository),e,t).then(()=>{this.$store.commit("addOperation",{title:"Upload complete",description:'File "'+this.file.name+'" uploaded correctly',host:this.repository,type:"repository"}),this.$bvToast.toast('File "'+this.file.name+'" uploaded correctly',{title:"Upload complete",variant:"success",solid:!0})})}},handleOk(){this.handleSubmit()}}},rt=ot,it=Object(d["a"])(rt,st,at,!1,null,null,null),nt=it.exports,lt={name:"SidebarWrapper",components:{SidebarResourcesList:V,SidebarOperationsList:G,SidebarStatusSummary:et,FileUploadModal:nt}},ct=lt,dt=(s("6268"),Object(d["a"])(ct,R,D,!1,null,null,null)),pt=dt.exports,ut={name:"App",components:{Navbar:u,SidebarHosts:M,SidebarWrapper:pt},mounted(){this.$store.dispatch("checkHosts"),this.$store.dispatch("checkWorkspaces")}},mt=ut,ht=Object(d["a"])(mt,o,r,!1,null,null,null),ft=ht.exports,bt=s("8c4f"),vt=function(){var t=this,e=t._self._c;return e("b-col",{staticClass:"col-md-8 col-lg-9 col-xl-10 content-visualizer d-flex flex-column"},[e("h1",{staticClass:"h2 py-3 mb-3 border-bottom"},[t._v(t._s(this.resource.name))]),e("b-tabs",{staticClass:"mt-3 flex-fill d-flex flex-column",attrs:{"content-class":"mt-3 flex-fill"}},t._l(this.resource.type.visualizations,(function(s){return e("b-tab",{key:s.id,staticClass:"h-100",attrs:{title:s.name}},[e("iframe",{staticClass:"h-100",attrs:{src:t.buildUrl(t.resource.host,t.resource.id,s.id),loading:"lazy",width:"100%",frameborder:"0"}})])})),1)],1)},yt=[],gt={name:"Contentvisualizer",data:()=>({resource:{id:null,host:null,type:{visualizations:[]}}}),created(){this.updateId()},watch:{$route:"updateId"},methods:{buildUrl(t,e,s){return P.buildResourceVisualization(t,e,s)},updateId(){if("id"in this.$route.params){var t=this.$store.getters.getResource(this.$route.params.id);if(1==t.length)return void(this.resource=t[0])}this.$router.push("/")}}},wt=gt,xt=(s("f8cf"),Object(d["a"])(wt,vt,yt,!1,null,null,null)),_t=xt.exports;a["default"].use(bt["a"]);const kt=[{path:"/resource/:id",name:"ContentVisualizer",component:_t}],St=new bt["a"]({mode:"history",base:"/dashboard-2/",routes:kt});var Ct=St,$t=s("2f62"),Ot={state:{hosts:[{name:"http://pdl-repository-eu1.herokuapp.com",status:"loading",type:"repository"},{name:"http://pdl-repository-eu2.herokuapp.com",status:"loading",type:"repository"}]},mutations:{addHost(t,e){t.hosts.push({name:e.host,status:"loading",type:e.type})},removeHost(t,e){t.hosts.forEach((function(s,a){s.type==e.type&&s.name==e.name&&t.hosts.splice(a,1)}))}},actions:{async checkIndividualHosts({state:t}){for(const e of t.hosts)L.a.get(P.buildPingUrl(e.name)).then(t=>a["default"].set(e,"status",this.systemStatus="pong"===t.data?"online":"offline")).catch(()=>{a["default"].set(e,"status","offline")})},async checkHosts({dispatch:t}){t("checkIndividualHosts"),setInterval(()=>{t("checkIndividualHosts")},5e3)}},modules:{},getters:{getHostsMiner:t=>t.hosts.filter(t=>"miner"===t.type),getHostsRepository:t=>t.hosts.filter(t=>"repository"===t.type),getSystemStatus(t){var e="online";for(const s of t.hosts){if("offline"===s.status){e="offline";break}"loading"===s.status&&(e="loading")}return e}}},Ht={state:{workspace:[{id:"id1",name:"resource1",type:{name:"xes",description:"A file with extension .xes",visualizations:[{id:"v1",name:"Vis 1"},{id:"v2",name:"Vis 2"}]},host:""}]},mutations:{addResource(t,e){t.workspace.push(e)},updateWorkspace(t,e){a["default"].set(t,"workspace",e)}},actions:{async checkWorkspaceHosts({commit:t,rootGetters:e}){var s=[];for(const a of e.getHostsRepository)"online"===a.status&&await L.a.get(P.buildResourceListUrl(a.name)).then(t=>{s=s.concat(t.data.map(t=>({...t,host:a.name})))});s.sort((function(t,e){return new Date(e.creationDate)-new Date(t.creationDate)})),t("updateWorkspace",s)},async checkWorkspaces({dispatch:t}){t("checkWorkspaceHosts"),setInterval(()=>{t("checkWorkspaceHosts")},5e3)}},modules:{},getters:{getWorkspace:t=>t.workspace,getResource:t=>e=>t.workspace.filter(t=>t.id===e)}},jt={state:{operations:[]},mutations:{addOperation(t,e){t.operations.unshift({title:e.description,started:Date.now(),completed:null,host:e.host,type:e.type})}},actions:{},modules:{},getters:{getOperations:t=>t.operations}};a["default"].use($t["a"]);var zt=new $t["a"].Store({modules:{hosts:Ot,workspace:Ht,operations:jt}}),Ut=(s("f9e3"),s("2dd8"),s("5f5b")),Mt=s("b1e0"),Rt=s("1dce"),Dt=s.n(Rt);a["default"].config.productionTip=!1,a["default"].use(Ut["a"]),a["default"].use(Mt["a"]),a["default"].use(Dt.a),a["default"].use(s("2ead")),new a["default"]({router:Ct,store:zt,render:t=>t(ft)}).$mount("#app")},6268:function(t,e,s){"use strict";s("a17e")},a17e:function(t,e,s){},b90e:function(t,e,s){},babb:function(t,e,s){},ccd7:function(t,e,s){"use strict";s("babb")},f8cf:function(t,e,s){"use strict";s("212b")}});
//# sourceMappingURL=app.dc2b0d52.js.map